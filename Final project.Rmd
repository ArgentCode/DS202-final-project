---
title: "Final"
author: "Ngoc Nguyen, Craig Orman"
date: "4/29/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Data Selection
This is how we selected our data and ensured it would be small enough to go on github.
```{r eval = FALSE}
HousingOriginal <- read.csv("properties_2017.csv")
smallData = HousingOriginal %>% select(yearbuilt, bathroomcnt, architecturalstyletypeid, regionidcity, fireplacecnt,
                                       basementsqft, finishedsquarefeet15, landtaxvaluedollarcnt, typeconstructiontypeid, garagetotalsqft,
                                       latitude, longitude, taxvaluedollarcnt)
smallData = smallData %>% filter(bathroomcnt > 0, taxvaluedollarcnt > 999)
samllSampledData = sample_n(smallData, 1000000)
write.csv(samllSampledData,"C:\\Users\\black\\Desktop\\School\\DS 202\\DS202-final-project\\properties_small_2017.csv", row.names = FALSE)
```

## Instantiation
```{r echo = FALSE}
library(tidyverse)
library(lubridate)
library(maps)
HousingOriginal <- read.csv("properties_small_2017.csv")
```
>__Plan__

Requirement: Group work: at least 10 variables, 100 observations and 6 out of the 8 Candidate plots.

  I. Choose the data

  2. Brain storming 
  - questions/ expectation might have on the data ( list all expectations)

  3. Submission for the plan( homework 11)
  
  - the names of all team members that worked on the final project;
  - an overview of the data set you are working with for the final project;
  - a discussion of cleaning steps that are necessary to get the data into the right shape.
  
## Proposal (Homework 11)

Data was acquired from a 2017 kaggle competition, [Zillow Prize: Zillowâ€™s Home Value Prediction (Zestimate)](https://www.kaggle.com/competitions/zillow-prize-1). We specifically used the properties_2017.csv

Project is on [Github](https://github.com/ArgentCode/DS202-final-project).

Our plan is to use the taxvaluedollarcnt as the actual value of the house, and we plan on doing a variety of visualizations and assessments on both the explanatory variables and the response variable. We will be coming at this with a statistics approach as if we were preparing to make a model. We also hope to do a map to visualize the data and see what we can do for that style of visual with coloring and making interesting visuals.

We noticed the data is decently well cleaned. We suspect dealing with the large number of NA's will be a major challenge, but most of the cleaning has occured in the form of reducing. The original data was an almost 700 mb csv file we had to shrink down (Code above on methodology).
II. Clean & Visualize data

  1. Clean
  
  - Are variables in the right format? 
  - factors are factors, date information is in date format?
  - Are levels in the correct order? 
  - Are level names textual information rather than cryptic numbers?
  - Do variable names to be changed for convenience?

  2. Find (visual) summaries of each data variable using diferent plots to see different aspect ( to see weather expectations matchs)
  
  3. Follow up
  
  - compare with our expectations.
  - Find out where the expectations match and where do not. Then find "why" 
    
  4. Visual summary 
  
  - One visual summary chart for each relevant variable
  - Document expectations ( 2 sentences )
  - Emphasize main finding
  

III. Investigate relationship

- Two-way relationship

+ Numeric vs numberic ( using scatterplots) 
+ Numeric vs categorical ( using side by side boxplots or facetted plot)
+ Categorical vs categorical ( using barchart with facetting or other aesthetic)

- Repeat and follow the questions on index 3.
- Include the next variable to find the relationship

IV. Digging deeper with some fancy stuff ( if have time)
- Training some models

## Actual Report

Real estate and Housing prices are always in great flux. We have decided to use the 2017 Zillow competition data to try and predict prices for real estate using a variety of factors. The response variable we are using will be taxvaluedollarcnt. A continuous quantitative variable. 
The response variables are:
Quantitative: 
yearbuilt, discrete
bathroomcnt, discrete with halves
fireplacecnt, discrete
basementsqft, continuous
finishedsquarefeet15, continuous
landtaxvaluedollarcnt, continuous
garagetotalsqft, continuous

Categorical:
architecturalstyletypeid, nominal
regionidcity, nominal
typeconstructiontypeid, nominal

Response Variable:
The response variable is our first investigation, we will be attempting to see if it is bell shaped and has a normal distribution. We see the data is quite spread out, with a standard deviation of $614,453 and a mean of $441,428. There are 103,994 observations of houses less than $100,000 and 443 observations of houses more than $10,000,000. So our data is incredibly spread out. 
```{r}
HousingOriginal %>% ggplot(aes(x=taxvaluedollarcnt)) + geom_histogram()
HousingOriginal$taxvaluedollarcnt %>% summary() 
mean(HousingOriginal$taxvaluedollarcnt)
sd(HousingOriginal$taxvaluedollarcnt)
HousingOriginal[HousingOriginal$taxvaluedollarcnt > 10000000, ] %>% count()
HousingOriginal[HousingOriginal$taxvaluedollarcnt < 100000, ] %>% count()
```
Next, to get a general sense of what data we are talking about, we will map out the data on a plot. Zillow multiplied all longitudes and latitudes by 1*10e^6 so we accounted for this in the code.
```{r}
states <- map_data("state")
filter(states, region == "california") %>% ggplot(aes(x = long, y = lat)) +
  geom_path(aes(group = group)) +
  geom_point(data=HousingOriginal,aes(x=longitude/1000000, y=latitude/1000000, color="#E69F00")) +
  ggtitle("All data mapped against California")
```
So now we know for certain that we are deal with southern California homes. Everything from mansions to shacks. Before we begin modelling, there are a couple of preemptive questions I would like to ask:

### We each should do one of each of these
+ Numeric vs numberic ( using scatterplots) 
+ Numeric vs categorical ( using side by side boxplots or facetted plot)
+ Categorical vs categorical ( using barchart with facetting or other aesthetic)

### Craig's Questions:
Variables: yearBuilt, bathroom ct, architectureStyleTypeId, regionIDCity, fireplacecnt
1. What is the relationship between bathroomcnt and fireplacecnt 
2. What is the relationship between yearbuilt and architectureStyleTypeId
3. What is the relationship between regionIDCity and architectureStyleTypeId

In modern architecture, fire places are not very common place, but do exist especially in nicer homes. In older architecture, they are more common for both stylisitic and actual warmth purposes.
```{}
HousingOriginal %>% ggplot(aes(x=bathrromcnt, y=fireplacecnt))
```


### Ngoc's Questions:
